import{a as ie,b as re}from"./chunk-RMOSQDYJ.js";import{a as ae}from"./chunk-GMGBLV36.js";import"./chunk-5B7ZW7FK.js";import{a as Q,d as O,h as P,l as y,s as S,t as te,x as ne,y as oe}from"./chunk-YERNYWEJ.js";import{C as X,G as Y,H as Z,I as ee}from"./chunk-RN4BWDOD.js";import{a as q,i as x,l as J,p as K}from"./chunk-JGECHALV.js";import{p as W}from"./chunk-PZLP2VNW.js";import{Ab as V,Cb as U,Db as B,F as R,Lb as a,Mb as z,P as D,Pb as _,R as C,S as j,Ua as c,Ub as T,Vb as I,Z as M,da as s,ga as v,h,kb as G,mb as d,qa as H,qb as N,ra as A,rb as w,s as u,sb as F,t as $,tb as k,ub as i,vb as o,wb as g}from"./chunk-3CCYGFLX.js";var b=(()=>{let e=class e{constructor(){this.currentValue$=new h}};e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=M({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function le(t,e){if(t&1){let m=V();i(0,"div",5)(1,"button",6),a(2," MENU "),o(),i(3,"button",7),U("click",function(){H(m);let n=B();return A(n.authService.logout())}),a(4," CERRAR SESI\xD3N "),o()()}if(t&2){let m=B();c(),d("routerLink",m.authService.isAdministrator()?"/admin":"/customer")}}function se(t,e){t&1&&(i(0,"div",5)(1,"button",8),a(2,"INGRESAR"),o(),i(3,"button",9),a(4," REG\xCDSTRATE "),o()())}var ce=(()=>{let e=class e{constructor(){this.searchBarFormControl=new P(""),this.searchBarService=s(b),this.authService=s(K),this.searchBarService.currentValue$=this.searchBarFormControl.valueChanges.pipe(u(r=>r||""),R(300),C(""))}};e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=v({type:e,selectors:[["app-header"]],standalone:!0,features:[_],decls:10,vars:2,consts:[[1,"box-shadow"],[1,"container"],["routerLink","/home",1,"logo-container"],["src","assets/images/logo.png","alt","logo"],["type","text","placeholder","Buscar...",1,"search-bar",3,"formControl"],[1,"buttons-container"],["mat-button","",1,"primary",3,"routerLink"],["mat-button","",1,"accent",3,"click"],["mat-button","","routerLink","/login",1,"primary"],["mat-button","","routerLink","/register",1,"accent"]],template:function(n,p){n&1&&(i(0,"header",0)(1,"div",1)(2,"div",2),g(3,"img",3),i(4,"h1"),a(5,"MUSICAL EVENTS"),o()(),i(6,"div"),g(7,"input",4),o(),G(8,le,5,1,"div",5)(9,se,5,0),o()()),n&2&&(c(7),d("formControl",p.searchBarFormControl),c(),N(8,p.authService.loggedIn()?8:9))},dependencies:[Z,Y,x,S,Q,O,y],styles:["header[_ngcontent-%COMP%]{background-color:var(--secondary-color);display:flex;justify-content:center;height:80px}header[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]{width:1000px;display:flex;justify-content:space-between;align-items:center}header[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .logo-container[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;cursor:pointer}header[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .logo-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:50px;height:50px}header[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .logo-container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:16px;color:#fff;font-weight:500;margin-bottom:0}header[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .search-bar[_ngcontent-%COMP%]{width:400px;height:30px;border-radius:8px;padding-left:10px}header[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .buttons-container[_ngcontent-%COMP%]{display:flex;gap:20px}header[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .buttons-container[_ngcontent-%COMP%]   .primary[_ngcontent-%COMP%]{color:var(--primary-color)}header[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .buttons-container[_ngcontent-%COMP%]   .accent[_ngcontent-%COMP%]{color:var(--accent-color)}"]});let t=e;return t})();var me=(()=>{let e=class e{constructor(){this.http=s(q),this.baseUrl=J.baseUrl}getData(){let r=this.baseUrl+"/api/Home";return this.http.get(r)}};e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=M({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function de(t,e){if(t&1&&(i(0,"mat-option",4),a(1),o()),t&2){let m=e.$implicit;d("value",m.id),c(),z(m.name)}}function fe(t,e){if(t&1&&g(0,"app-event-card",6),t&2){let m=e.$implicit;d("data",m)("routerLink","/event-detail/"+m.id)}}function ue(t,e){t&1&&(i(0,"h1"),a(1,"No encontramos conciertos :("),o())}var Je=(()=>{let e=class e{constructor(){this.genres$=new h,this.filteredConcerts$=new h,this.homeService=s(me),this.searchBarService=s(b),this.currentGenre=new P(0)}ngOnInit(){let r=this.homeService.getData().pipe(D(1));this.genres$=r.pipe(u(l=>l.genres.filter(f=>f.status)));let n=r.pipe(u(l=>l.concerts)),p=this.currentGenre.valueChanges.pipe(C(0),j(l=>n.pipe(u(f=>l===0?f:f.filter(E=>E.genreId===l)))));this.filteredConcerts$=$([p,this.searchBarService.currentValue$]).pipe(u(([l,f])=>l.filter(E=>f===""?!0:E.description.toLowerCase().includes(f.toLowerCase()))))}};e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=v({type:e,selectors:[["app-home"]],standalone:!0,features:[_],decls:21,vars:7,consts:[[1,"home-container"],[1,"container"],[1,"filter"],[3,"formControl"],[3,"value"],[1,"event-list"],[3,"data","routerLink"]],template:function(n,p){n&1&&(i(0,"div",0),g(1,"app-header"),i(2,"div",1)(3,"section",2)(4,"mat-form-field")(5,"mat-label"),a(6,"G\xE9nero musical"),o(),i(7,"mat-select",3)(8,"mat-option",4),a(9,"Todos"),o(),F(10,de,2,2,"mat-option",4,w),T(12,"async"),o()(),i(13,"span"),a(14,"Selecciona tu g\xE9nero musical favorito"),o()(),i(15,"section",5),F(16,fe,1,2,"app-event-card",6,w,!1,ue,2,0,"h1"),T(19,"async"),o()(),g(20,"app-footer"),o()),n&2&&(c(7),d("formControl",p.currentGenre),c(),d("value",0),c(2),k(I(12,3,p.genres$)),c(6),k(I(19,5,p.filteredConcerts$)))},dependencies:[ce,ee,oe,ne,te,re,ie,X,ae,S,O,y,W,x],styles:[".home-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%}.home-container[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]{display:flex;align-items:center;flex-direction:column;height:100%}.home-container[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .filter[_ngcontent-%COMP%]{display:flex;width:940px;gap:20px;align-items:center;margin-top:30px}.home-container[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .filter[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-bottom:20px;font-weight:500;font-size:16px}.home-container[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .event-list[_ngcontent-%COMP%]{width:1000px;display:flex;flex-wrap:wrap;justify-content:center;gap:20px;margin-top:20px;margin-bottom:40px}.home-container[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .event-list[_ngcontent-%COMP%]   app-event-card[_ngcontent-%COMP%]{cursor:pointer}"]});let t=e;return t})();export{Je as HomeComponent};
